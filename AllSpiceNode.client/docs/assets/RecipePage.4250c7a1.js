import{k as y,A as a,_ as S,r as k,l as I,y as A,q as P,f as v,c as s,a as e,t as d,F as p,j as _,i as m,w as x,z as V,v as M,x as N,u as T,o as c,s as h,g as B,p as C,e as E,B as U,n as j}from"./index.28fefcaa.js";import{r as f}from"./RecipesService.8c570f73.js";import{s as q,i as D}from"./StepsService.eba66517.js";class F{async createReview(i){const r=await y.post("api/reviews",i);a.activeRecipeReviews.push(r.data)}async getRecipeReviews(i){const r=await y.get("api/recipes/"+i+"/reviews");a.activeRecipeReviews=r.data}getAverageReview(){let i=a.activeRecipeReviews,r=0;i.forEach(t=>{r+=t.rating}),r=r/i.length,a.activeRecipeRating=r}}const u=new F;const z={async beforeCreate(){let n=N();await f.setActiveRecipe(n.params.id),await u.getRecipeReviews(n.params.id),await u.getAverageReview(),await f.getProfileRecipes(a.activeRecipe.creatorId),await q.getRecipeSteps(n.params.id),await D.getRecipeIngredients(n.params.id)},setup(){let n=T(),i=k({rating:0});return I(async()=>{}),A(()=>{a.activeRecipeReviews,u.getAverageReview()}),P(()=>{a.activeRecipe={},a.activeRecipeAccountRecipes=[],a.activeRecipeReviews=[],a.activeRecipeRating=0,a.activeRecipeIngredients=[],a.activeRecipeSteps=[]}),{recipe:v(()=>a.activeRecipe),reviews:v(()=>a.activeRecipeReviews),rating:v(()=>a.activeRecipeRating),newReview:i,account:v(()=>a.account),profileRecipes:v(()=>a.activeRecipeAccountRecipes),ingredients:v(()=>a.activeRecipeIngredients),steps:v(()=>a.activeRecipeSteps),navToProfile(r){n.push({name:"Profile",params:{id:r}})},createReview(){i.value.recipeId=a.activeRecipe.id,console.log(i.value),u.createReview(i.value),i.value={rating:0}}}}},l=n=>(C("data-v-200e41cd"),n=n(),E(),n),L={class:"container"},O={class:"row"},W={class:"col-12"},Y={class:"mt-4"},G={class:"text-muted m-0"},H={class:"text-primary mb-0"},J={key:0,class:"m-0"},K={class:"mdi mdi-star text-primary"},Q={class:"mdi mdi-star-outline text-primary"},X={class:"text-muted"},Z={class:"col-md-9"},$=["src"],ee={class:"col-md-3 mt-3 mt-md-0"},te={class:"bg-light p-2 rounded"},ie=l(()=>e("h4",{class:"text-primary text-center"},"Published By",-1)),se=["src"],ce={class:"ms-2 my-0"},ae={class:"ms-2 my-0"},oe={class:"row"},ne={class:"col-md-6"},re={class:"bg-light rounded p-2 mt-4"},de=l(()=>e("h4",{class:"text-primary text-center m-0"},[e("i",{class:"mdi mdi-chef-hat"}),h(" Recipe Ingredients")],-1)),le=l(()=>e("div",{class:"divider-line"},null,-1)),ve={class:"mt-4"},pe={class:"mb-2"},_e={class:"col-md-6"},me={class:"bg-light rounded p-2 mt-4"},ue=l(()=>e("h4",{class:"text-primary text-center m-0"},[e("i",{class:"mdi mdi-format-list-numbered"}),h(" Recipe Steps ")],-1)),he=l(()=>e("div",{class:"divider-line"},null,-1)),Re={class:"mt-4"},ge={class:"bg-primary text-light p-2 step-background"},we={class:"row"},ye={class:"col-12"},xe=l(()=>e("h4",{class:"text-primary mt-4"},"What Others Are Saying",-1)),fe={class:"row"},be={key:0,class:"text-muted"},Se={class:"col-md-6 mb-2"},ke={class:"col-12 mt-4"},Ie=l(()=>e("h4",{class:"m-0 text-primary"},"Made This Recipe?",-1)),Ae=l(()=>e("p",{class:"text-muted m-0"},"leave a review",-1)),Pe={key:0,class:"mt-3 text-muted text-center mb-5"},Ve={key:1,class:"d-flex align-items-center"},Me={class:"mdi mdi-star text-primary"},Ne={class:"mdi mdi-star-outline text-primary"},Te=U('<option value="1" data-v-200e41cd>1</option><option value="2" data-v-200e41cd>2</option><option value="3" data-v-200e41cd>3</option><option value="4" data-v-200e41cd>4</option><option value="5" data-v-200e41cd>5</option>',5),Be=[Te],Ce={class:"d-flex justify-content-end"};function Ee(n,i,r,t,Ue,je){var R,g;const b=j("Review");return c(),s("div",L,[e("div",O,[e("div",W,[e("div",Y,[e("p",G,d(t.recipe.category),1),e("h1",H,d(t.recipe.title),1),t.reviews.length>0?(c(),s("h1",J,[(c(!0),s(p,null,_(Math.floor(t.rating),o=>(c(),s("i",K))),256)),(c(!0),s(p,null,_(5-Math.floor(t.rating),o=>(c(),s("i",Q))),256))])):m("",!0),e("p",X,d(t.reviews.length)+" reviews",1)])]),e("div",Z,[e("img",{class:"recipe-img",src:t.recipe.picture,alt:""},null,8,$)]),e("div",ee,[e("div",te,[ie,e("div",{class:"d-flex align-items-center pointer",onClick:i[0]||(i[0]=o=>{var w;return t.navToProfile((w=t.recipe)==null?void 0:w.creatorId)})},[e("img",{src:(R=t.recipe.creator)==null?void 0:R.picture,class:"profile-img",alt:""},null,8,se),e("div",null,[e("p",ce,d((g=t.recipe.creator)==null?void 0:g.name),1),e("p",ae,d(t.profileRecipes.length)+" recipes published",1)])])])])]),e("div",oe,[e("div",ne,[e("div",re,[de,le,e("div",ve,[e("div",pe,[e("ul",null,[(c(!0),s(p,null,_(t.ingredients,o=>(c(),s("li",{key:o.id},d(o.name)+", "+d(o.quantity),1))),128))])])])])]),e("div",_e,[e("div",me,[ue,he,e("div",Re,[(c(!0),s(p,null,_(t.steps,o=>(c(),s("div",{class:"d-flex mb-2",key:o.id},[e("p",null,[e("span",ge,d(o.position),1),h(" "+d(o.body),1)])]))),128))])])])]),e("div",we,[e("div",ye,[xe,e("div",fe,[t.reviews.length==0?(c(),s("p",be,"No Reviews Yet...")):m("",!0),(c(!0),s(p,null,_(t.reviews,o=>(c(),s("div",Se,[B(b,{r:o},null,8,["r"])]))),256))])]),e("div",ke,[Ie,Ae,t.account.id?m("",!0):(c(),s("p",Pe,"Sign in to leave a review...")),t.account.id?(c(),s("div",Ve,[e("h1",null,[(c(!0),s(p,null,_(parseInt(t.newReview.rating),o=>(c(),s("i",Me))),256)),(c(!0),s(p,null,_(5-parseInt(t.newReview.rating),o=>(c(),s("i",Ne))),256))]),x(e("select",{name:"",id:"",class:"form-select select ms-2","onUpdate:modelValue":i[1]||(i[1]=o=>t.newReview.rating=o)},Be,512),[[V,t.newReview.rating]])])):m("",!0),t.account.id?x((c(),s("textarea",{key:2,name:"",id:"",cols:"30",rows:"10",class:"form-control","onUpdate:modelValue":i[2]||(i[2]=o=>t.newReview.body=o),placeholder:"Tell us about your experience..."},null,512)),[[M,t.newReview.body]]):m("",!0),e("div",Ce,[t.account.id?(c(),s("button",{key:0,class:"btn btn-outline-primary mt-2 mb-5",onClick:i[3]||(i[3]=o=>t.createReview())},"Submit")):m("",!0)])])])])}const ze=S(z,[["render",Ee],["__scopeId","data-v-200e41cd"]]);export{ze as default};
